<%- include('../layouts/user/header.ejs') %>

<!-- Breadcrumb Start -->
<div class="container-fluid">
  <div class="row px-xl-5">
    <div class="col-12">
      <nav class="breadcrumb bg-light mb-30">
        <a class="breadcrumb-item text-dark" href="#">Home</a>
        <a class="breadcrumb-item text-dark" href="#">Shop</a>
        <span class="breadcrumb-item active">Checkout</span>
      </nav>
    </div>
  </div>
</div>
<!-- Breadcrumb End -->

<!-- Checkout Start -->
<div class="container-fluid">
  <div class="row px-xl-5">
    <div class="col-lg-8">
      <h5 class="section-title position-relative text-uppercase mb-3">
        <span class="bg-secondary pr-3">Billing Address</span>
      </h5>
      <div class="bg-light p-30 mb-5">
        <div class="row justify-content-end"> <!-- Add the 'justify-content-end' class to align the button to the right -->
          <a href="/AddAddress">
            <button class="btn btn-success font-weight-bold">
              Add Address
            </button>
          </a>
        </div>
        
        <br />
        <% if (address) { for (let i = 0; i < address.length; i++) { %>
        <div class="row">
          
          <div class="custom-control custom-radio">
            
            <input
              type="radio"
              class="custom-control-input"
              name="payment"
              id="<%= address[i].userName %>"
            />
            <label class="custom-control-label" for="<%= address[i].userName %>">
              Name:<%= address[i].userName %> <br>
              House Name:<%= address[i].houseName %><br/>
              Number:<%= address[i].mobile %> <br>
              Alternative Number:<%= address[i].altrenativeMob %><br>
              City:<%= address[i].city %><br/>
              State:<%= address[i].state %><br>
              PIN:<%= address[i].pincode %>
            </label><br /><br />
            <a href="/editAddress/<%= address._id %>">
              <button class="btn btn-sm btn-danger font-weight-bold">
                Editt
              </button>
            </a>
            <a class="btn btn-sm btn-danger font-weight-bold " type="button" onclick="deleteAddress('<%= address[i]._id %>')">Delete </a>
            
        </div>
        
          </div>
          <% } } %>
      </div>
    </div>
    <div class="col-lg-4">
      <form class="mb-30" action="">
        <div class="input-group">
          <input
            type="text"
            class="form-control border-0 p-4"
            placeholder="Coupon Code"
          />
          <div class="input-group-append">
            <button class="btn btn-primary">Apply Coupon</button>
          </div>
        </div>
      </form>
      <h5 class="section-title position-relative text-uppercase mb-3">
        <span class="bg-secondary pr-3">Order Total</span>
      </h5>
      <div class="bg-light p-30 mb-5">
        <div class="border-bottom">
          <h6 class="mb-3">Products</h6>
          <div class="d-flex justify-content-between">
            <p>Product Name 1</p>
            <p>$150</p>
          </div>
          <div class="d-flex justify-content-between">
            <p>Product Name 2</p>
            <p>$150</p>
          </div>
          <div class="d-flex justify-content-between">
            <p>Product Name 3</p>
            <p>$150</p>
          </div>
        </div>
        <div class="border-bottom pt-3 pb-2">
          <div class="d-flex justify-content-between mb-3">
            <h6>Subtotal</h6>
            <h6>$150</h6>
          </div>
          <div class="d-flex justify-content-between">
            <h6 class="font-weight-medium">Shipping</h6>
            <h6 class="font-weight-medium">$10</h6>
          </div>
        </div>
        <div class="pt-2">
          <div class="d-flex justify-content-between mt-2">
            <h5>Total</h5>
            <h5>$160</h5>
          </div>
        </div>
      </div>
      <div class="mb-5">
        <h5 class="section-title position-relative text-uppercase mb-3">
          <span class="bg-secondary pr-3">Payment</span>
        </h5>
        <div class="bg-light p-30">
          <div class="form-group">
            <div class="custom-control custom-radio">
              <input
                type="radio"
                class="custom-control-input"
                name="payment"
                id="paypal"
              />
              <label class="custom-control-label" for="paypal">Paypal</label>
            </div>
          </div>
          <div class="form-group">
            <div class="custom-control custom-radio">
              <input
                type="radio"
                class="custom-control-input"
                name="payment"
                id="directcheck"
              />
              <label class="custom-control-label" for="directcheck">
                Direct Check
              </label>
            </div>
          </div>
          <div class="form-group mb-4">
            <div class="custom-control custom-radio">
              <input
                type="radio"
                class="custom-control-input"
                name="payment"
                id="banktransfer"
              />
              <label class="custom-control-label" for="banktransfer">
                Bank Transfer
              </label>
            </div>
          </div>
          <button class="btn btn-block btn-primary font-weight-bold py-3">
            Place Order
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Checkout End -->

<script>
  function deleteAddress(addressId) {
Swal.fire({
title: 'Are you sure?',
text: 'You want to delete address',
icon: 'warning',
showCancelButton: true,
confirmButtonColor: '#3085d6',
cancelButtonColor: '#d33',
confirmButtonText: 'Yes, delete!'
}).then((result) => {
if (result.isConfirmed) {
  $.ajax({
    url: '/deleteAddress',
    data: {
      address: addressId,
     
    },
    method: 'post',
    success: (response) => {
      location.reload();
// $("#reloaddiv").load('/checkout #reloaddiv')
      Swal.fire({
        title: 'Deleted!',
        text: 'Your item has been deleted.',
        icon: 'success',
        timer: 1500,
        showConfirmButton: false
      });
    },
    error: (error) => {
      console.log(error);
      Swal.fire({
        title: 'Error!',
        text: 'An error occurred while deleting the item.',
        icon: 'error',
        showConfirmButton: false
      });
    }
  });
}
});
}
</script>

<%- include('../layouts/user/footer.ejs') %>
